<%= form_for(@cart, remote: true, :html => { :role => "form" }) do |f| %>
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Your Cart</h4>
  </div>
  <div id="cart_modal_body" class="modal-body">
      <% if @cart.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@cart.errors.count, "error") %> prohibited this cart from being saved:</h2>
          <ul>
          <% @cart.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
          </ul>
        </div>
      <% end %>
      <div class ="row">
        <div class="col-xs-12">
          <div class="field-label col-xs-6"><label>Item Name</label></div>
          <div class="field-label col-xs-2"><label>Price</label></div>
          <div class="field-label col-xs-2"><label>Quantity</label></div>
          <div class="field-label col-xs-2"><label>Remove?</label></div>
        </div>
      </div>
      <% @cart.line_items.each do |line_item| %>
        <div class ="row">
          <div class="col-xs-12">
            <div class="col-xs-6">
              <% line_item_id = line_item.id %>
              <% puts "line_item_id: " + line_item_id.to_s %>
              <%= @line_items[line_item_id][:product_name] %><br>
              <%= @line_items[line_item_id][:listing_name] %>
            </div>
            <div class="col-xs-2"><%= @line_items[line_item_id][:price] %></div>
            <div class="form-group col-xs-2">
              <%= f.fields_for :line_items, line_item do |line_item_fields| %>
                <%= line_item_fields.number_field :quantity, class: "line_item_qty_field" %>
              <% end %>
            </div>
            <div class="col-xs-2">
              <%= link_to 'Remove', line_item, remote:true, method: :delete, class:"btn btn-default btn-xs" %>
            </div>
          </div>
        </div>
      <% end %>
  </div>
  <div id="cart_modal_footer" class="modal-footer">
    <div class="actions">
      <%= f.submit class:"btn btn-default" %>
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
  </div>
<% end %>





  